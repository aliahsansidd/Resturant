<form #f="ngForm">
  <div class="container">
    <div class="row  align-items-center justify-content-between">
      <div class="col-11 col-sm-12 page-title">
        <h3>Accident Emergency And Panel</h3>
        <p>Register New Emergency</p>
      </div>
      <div class="col text-right ">
        <div><button class="btn btn-success pull-right" (click)="showModal()">Find Patient</button></div>
      </div>
      <span style="padding-right:20px">
        <button type="button" class="btn btn-danger" style="text-align: right !important" (click)="createTplModal(tplTitle, tplContent, tplFooter)">
          <span class="text">Brought By</span>
          <i class="fa fa-money"></i>
        </button>
      </span>
    </div>



    <div class="row">
      <div class="col-sm-16">
        <div class="card">
          <div class="card-header">
            <div class="row">
              <div class="col-lg-8 col-md-8">
                <h5 class="card-title">Add New Emergency</h5>
              </div>
              <div class="col-lg-8 col-md-8 text-right" style="color: #000;">
                ML#
                <input type="checkbox" name="f1" id="MLchk" (click)="ShowERInput =  !ShowERInput">
                <input type="text" id="text" name="f1123654" style=" width: 20%;" *ngIf="ShowERInput" class="small-form-control">
              </div>
            </div>

          </div>
          <div class="card-body">
            <div class="row justify-content-center">
              <div class="col-md-10 ">

                <div class="row ">
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group">
                      <!-- <div class="form-group" [class.has-error]="!(mrNo.valid || (mrNo.pristine && !fm.submitted)) || (mrNo.errors && (mrNo.dirty || mrNo.touched ))"> -->
                      <label>MR#</label>
                      <input type="text" disabled class="form-control" name="f11572" name="mrno" pattern="[0-9]*" #mrNo="ngModel"
                        [(ngModel)]="AccidentAndEmergency.erNo" placeholder="Enter MR number">
                      <!-- <div [hidden]="mrNo.valid || (mrNo.pristine && !fm.submitted) && (mrNo.errors && (mrNo.dirty || mrNo.touched )) == false"
                    class="form-control-feedback">
                    <div *ngIf="mrNo.errors?.pattern"> pattern</div>
                  </div>
                  </div> -->
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div style="height: 32px;"></div>
                    <div class="form-group">
                      <input type="checkbox" id="customRadio1" name="f195175" name="customRadio" [(ngModel)]="AccidentAndEmergency.broughtDeath"
                        style="background-color: #6c8bef;">
                      &nbsp; Brought Death
                    </div>
                  </div>
                </div>
                <div class="row ">
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Patient Name</label>
                      <input type="text" class="form-control" name="f132178" placeholder="Enter Guardian name" [(ngModel)]="AccidentAndEmergency.patientName">
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Guardian Name</label>
                      <input type="text" class="form-control" name="f199" placeholder="Enter Guardian name" [(ngModel)]="AccidentAndEmergency.guardian">
                    </div>
                  </div>
                </div>
                <div class="row ">
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Age</label>
                      <input type="text" class="form-control" name="f1098" placeholder="Enter Patient Age" [(ngModel)]="AccidentAndEmergency.age">
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Gender</label>
                      <select class="form-control" name="f197" [(ngModel)]="AccidentAndEmergency.gender">
                        <option selected="selected" disabled [value]="null">Select Gender</option>
                        <option [value]="male">Male</option>
                        <option [value]="female">Female</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row ">
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Complaint</label>
                      <select class="form-control" name="f1956" [(ngModel)]="AccidentAndEmergency.complaint">
                        <option hidden selected="selected" disabled [value]="null">Select Complaint</option>
                        <option value="Shot Death">Shot Death</option>
                        <option value="Heat">Heat</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Catastrophic</label>
                      <select class="form-control" name="f195" [(ngModel)]="AccidentAndEmergency.catastrophicID">
                        <option hidden selected="selected" disabled [value]="null">Select Catastrophic Event</option>
                        <option [value]="item.id" *ngFor="let item of AllCatastrophicEvents">{{item.name}}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row ">
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>CNIC</label>
                      <input type="text" class="form-control" name="f194" placeholder="Enter Patient CNIC" [(ngModel)]="AccidentAndEmergency.cnic">
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group ">
                      <label>Phone</label>
                      <input type="tel" class="form-control" name="f193" placeholder="Enter Patient Phone" [(ngModel)]="AccidentAndEmergency.phone">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-8">
                    <div class="form-group">
                      <label>Address</label>
                      <textarea class="form-control" name="f192" rows="01" placeholder="Enter Description" [(ngModel)]="AccidentAndEmergency.address"></textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">

              <div class="col text-right ">
                <button class="btn btn-secondary" name="f43" type="reset" (click)="Reset()">Reset
                  <i class="fa fa-refresh"></i>
                </button>&nbsp;
                <button class="btn btn-primary" name="f13asdh1" (click)="Save()">Save
                  <i class="fa fa-save"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div>
    <nz-modal [nzWidth]="789" [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter"
      (nzOnCancel)="handleCancel()"> 
      <ng-template #modalContent>
        <div class="search-selector">
          <app-search-field [patientData]="AllPatientToFind" style="width: 100%; height: 325px;"> </app-search-field>
        </div>

      </ng-template>
      <ng-template style="display: none;" #modalFooter>
      </ng-template>
    </nz-modal>
  </div>

  <ng-template #tplTitle>
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item"> <a class="nav-link active" data-toggle="tab" href="#BroughterDetails" role="tab">Broughter
          Details</a> </li>
      <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#Ambulance" role="tab">Ambulance Details</a>
      </li>
    </ul>
  </ng-template>
  <ng-template #tplContent>
    <div class="card-body">
      <div class="justify-content-center container">
        <div class="col-md-18 ">
          <div class="tab-content">
            <!-- Broughter Detail -->
            <div class="tab-pane active" id="BroughterDetails" role="tabpanel">
              <div class="row ">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Name</label>
                    <input type="text" name="f123ad" class="form-control abc" id="Broughtername" placeholder="Enter Broughter Name"
                      [(ngModel)]="broughterDetails.name">
                  </div>
                </div>
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>CNIC</label>
                    <input type="text" name="f1asda32" class="form-control abc" placeholder="Enter CNIC number" [(ngModel)]="broughterDetails.cnic">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Phone</label>
                    <input type="tel" name="f1a234" class="form-control" placeholder="Enter phone" [(ngModel)]="broughterDetails.phone">
                  </div>
                </div>
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Mode of arrival</label>
                    <select class="form-control" name="f23ew1" style="color:#b2b2b2" [(ngModel)]="broughterDetails.modeOfArrival">
                      <option value="ByAmbulance">ByAmbulance</option>
                      <option value="ByOthers">ByOthers</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Address</label>
                    <textarea type="text" name="f1qwe" class="form-control" rows="1" placeholder="Enter Address"
                      [(ngModel)]="broughterDetails.address"></textarea>
                  </div>
                </div>
              </div>

            </div>
            <!-- Ambulance form -->
            <div class="tab-pane" id="Ambulance" role="tabpanel">
              <div class="row ">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Ambulance Name</label>
                    <input type="text" class="form-control" name="f1312" placeholder="Enter Ambulance Name" [(ngModel)]="ambulanceDetails.name">
                  </div>
                </div>
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Vehicle#</label>
                    <input type="text" class="form-control" name="f1112" [(ngModel)]="ambulanceDetails.vehicleNo"
                      placeholder="Enter Vehicle Number">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Center#</label>
                    <input type="text" class="form-control" name="f13" [(ngModel)]="ambulanceDetails.centerNo"
                      placeholder="Enter Center Number">
                  </div>
                </div>
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Location</label>
                    <input type="text" class="form-control" name="f12" [(ngModel)]="ambulanceDetails.location"
                      placeholder="Enter Location">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Madadgar Name</label>
                    <input type="text" class="form-control" name="f1123" [(ngModel)]="ambulanceDetails.madadgarName"
                      placeholder="Enter Madadgar Name">
                  </div>
                </div>
                <!-- <div class="col-lg-8 col-md-8">
                  <div class="form-group ">
                    <label>Ambulance Details</label>
                    <textarea class="form-control" name="f1" rows="1" type="text"></textarea>
                  </div>
                </div> -->
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template #tplFooter>
    <button type="button" class="btn btn-warning" data-dismiss="modal" (click)="destroyTplModal()">Done <i class="fa fa-backward"></i></button>
    <!-- <button nz-button nzType="primary" (click)="destroyTplModal()" >Close after submit</button> -->
  </ng-template>
</form>