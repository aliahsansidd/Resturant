<div class="container">
  <div class="row  align-items-center justify-content-between">
    <div class="col-11 col-sm-12 page-title">
      <h3>Death Registration</h3>
      <p>Register New Death</p>
    </div>
    <div class="col text-right ">
      <div><button class="btn btn-success pull-right" (click)="showModal()">Find Patient</button></div>
    </div>
  </div>
  <div class="row">
    <div class="col-xl-16">
      <form #fm="ngForm">
        <div class="card">
          <div class="card-header">
            <div class="row">
              <div class="col-lg-8">
                  <h5 class="card-title">Add New Death</h5>
              </div>
              <div class="col-lg-8" style="display:flex;  justify-content: flex-end">
                <button class="btn btn-success md-2" type="button" (click)='navigateTo("main/child/death-registration-view")' >Go To View</button>
              </div>
            </div> 
          </div>
          <br>
          <div class="card-body">
            <div class="row justify-content-center">
              <div class="col-md-10">
                <div class="row">
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(BookSrNo.valid || (BookSrNo.pristine && !fm.submitted)) || (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched ))">
                      <label>Book Sr.No</label>
                      <input class="form-control" required #BookSrNo="ngModel" name="BookSrNo" [(ngModel)]="Death.bookSrNumber"
                        type="text" placeholder="Book Serial No" id="BookSrNo">
                      <div [hidden]="BookSrNo.valid || (BookSrNo.pristine && !fm.submitted) && (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Book Sr.No
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <!-- <div class="form-group" [class.has-error]="!(BookSrNo.valid || (BookSrNo.pristine && !fm.submitted)) || (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched ))"> -->
                    <label>Death ID</label>
                    <input class="form-control" type="number" name="DeathID" placeholder="Death ID" id="example-text-input">
                    <!-- <div [hidden]="BookSrNo.valid || (BookSrNo.pristine && !fm.submitted) && (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched )) == false"
                  class="form-control-feedback">
                  Error: Please Enter OPD Name
                </div> 
              </div>-->
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <!-- <div class="form-group" [class.has-error]="!(BookSrNo.valid || (BookSrNo.pristine && !fm.submitted)) || (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched ))"> -->
                    <label>Patient's MR#</label>
                    <input class="form-control" name="mrNo" type="text" placeholder="Patient's MR#" id="example-text-input"
                      [(ngModel)]="Death.displayId" disabled>
                    <!-- <div [hidden]="BookSrNo.valid || (BookSrNo.pristine && !fm.submitted) && (BookSrNo.errors && (BookSrNo.dirty || BookSrNo.touched )) == false"
                  class="form-control-feedback">
                  Error: Please Enter OPD Name
                </div> 
              </div> -->
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(type.valid || (type.pristine && !fm.submitted)) || (type.errors && (type.dirty || type.touched ))">
                      <label>Type</label>
                      <select class="form-control" required name="type" #type="ngModel" [(ngModel)]="Death.type">
                        <option disabled selected="selected" hidden value="null">Select...</option>
                        <option value="Admitted Patient">Admitted Patient</option>
                        <option value="Brought Dead">Brought Dead</option>
                        <option value="Death in emergency">Death in emergency</option>
                      </select>
                      <div [hidden]="type.valid || (type.pristine && !fm.submitted) && (type.errors && (type.dirty || type.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Type
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <label>ER#</label>
                    <input class="form-control" name="Er" type="text" placeholder="Select Patient First" id="example-text-input"
                      disabled>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <label>CR#</label>
                    <input class="form-control" name="Er" type="text" placeholder="Select Patient First" id="example-text-input"
                      disabled>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                      <label>Patient's Name</label>
                      <input class="form-control" type="text" required disabled placeholder="Select Patient First" name="PatientName"
                        id="PatientName" [(ngModel)]="Death.name">
   
                    
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <label>Fatherâ€™s Name</label>
                    <input class="form-control" type="text" name="head" disabled placeholder="Select Patient First" id="example-text-input"
                      [(ngModel)]="Death.PatientDetails.familyHeadName">
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <label>Age</label>
                    <input class="form-control" type="text" name="age" disabled placeholder="Select Patient First" id="example-text-input"
                      [(ngModel)]="Death.age">
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <label>Gender</label>
                    <input type="text" class="form-control" placeholder="Select Patient First" name="gender" [(ngModel)]="Death.PatientDetails.gender" disabled>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <label>Martial Status</label>
                    <input type="text" [(ngModel)]="Death.PatientDetails.maritalStatus" placeholder="Select Patient First" disabled class="form-control">
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(DateOfDeath.valid || (DateOfDeath.pristine && !fm.submitted)) || (DateOfDeath.errors && (DateOfDeath.dirty || DateOfDeath.touched ))">
                      <label>Date Of Death</label>
                      <input class="form-control" required [(ngModel)]="Death.deathDate" #DateOfDeath="ngModel" type="date"
                        name="DateOfDeath" id="DateOfDeath">
                      <div [hidden]="DateOfDeath.valid || (DateOfDeath.pristine && !fm.submitted) && (DateOfDeath.errors && (DateOfDeath.dirty || DateOfDeath.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Date Of Death
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(DeathTime.valid || (DeathTime.pristine && !fm.submitted)) || (DeathTime.errors && (DeathTime.dirty || DeathTime.touched ))">
                      <label>Time of Death</label>
                      <input class="form-control" type="time" required name="DeathTime" #DeathTime="ngModel"
                        [(ngModel)]="Death.deathTime" id="DeathTime">
                      <div [hidden]="DeathTime.valid || (DeathTime.pristine && !fm.submitted) && (DeathTime.errors && (DeathTime.dirty || DeathTime.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Time of Death
                      </div>
                    </div>
                  </div>
                
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(AdmissionDate.valid || (AdmissionDate.pristine && !fm.submitted)) || (AdmissionDate.errors && (AdmissionDate.dirty || AdmissionDate.touched ))">
                      <label>Date Of Admission</label>
                      <input class="form-control" required [(ngModel)]="Death.admissionDate" #AdmissionDate="ngModel"
                        name="AdmissionDate" type="date" placeholder="enter date" id="example-text-input">
                      <div [hidden]="AdmissionDate.valid || (AdmissionDate.pristine && !fm.submitted) && (AdmissionDate.errors && (AdmissionDate.dirty || AdmissionDate.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Date Of Admission
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(AdmissionNo.valid || (AdmissionNo.pristine && !fm.submitted)) || (AdmissionNo.errors && (AdmissionNo.dirty || AdmissionNo.touched ))">
                      <label>Addmission No</label>
                      <input class="form-control" type="text" required [(ngModel)]="Death.admissionNo" #AdmissionNo="ngModel"
                        placeholder="AddmissionNo" name="AdmissionNo" id="AdmissionNo">
                      <div [hidden]="AdmissionNo.valid || (AdmissionNo.pristine && !fm.submitted) && (AdmissionNo.errors && (AdmissionNo.dirty || AdmissionNo.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Admission No
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(AdmissionTime.valid || (AdmissionTime.pristine && !fm.submitted)) || (AdmissionTime.errors && (AdmissionTime.dirty || AdmissionTime.touched ))">
                      <label>Time Of Admission</label>
                      <input class="form-control" name="timeOfAddmission" [(ngModel)]="Death.admissionTime" required
                        #AdmissionTime="ngModel" type="time" id="example-text-input">
                      <div [hidden]="AdmissionTime.valid || (AdmissionTime.pristine && !fm.submitted) && (AdmissionTime.errors && (AdmissionTime.dirty || AdmissionTime.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Time Of Admission
                      </div>
                    </div>
                  </div>

                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(occupation.valid || (occupation.pristine && !fm.submitted)) || (occupation.errors && (occupation.dirty || occupation.touched ))">
                      <label>Occupation</label>
                      <input class="form-control" name="occupation" placeholder="Enter Occupation" [(ngModel)]="Death.occupation"
                        required #occupation="ngModel" type="text" id="example-text-input">
                      <div [hidden]="occupation.valid || (occupation.pristine && !fm.submitted) && (occupation.errors && (occupation.dirty || occupation.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Occupation
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(province.valid || (province.pristine && !fm.submitted)) || (province.errors && (province.dirty || province.touched ))">
                      <label>Province</label>
                      <input class="form-control" name="province" placeholder="Enter Province" [(ngModel)]="Death.province"
                        required #province="ngModel" type="text" id="example-text-input">
                      <div [hidden]="province.valid || (province.pristine && !fm.submitted) && (province.errors && (province.dirty || province.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Province
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(townOrVillage.valid || (townOrVillage.pristine && !fm.submitted)) || (townOrVillage.errors && (townOrVillage.dirty || townOrVillage.touched ))">
                      <label>Town Or Village</label>
                      <input class="form-control" name="townOrVillage" [(ngModel)]="Death.townOrVillage" placeholder="Enter Town / Village"
                        required #townOrVillage="ngModel" type="text" id="example-text-input">
                      <div [hidden]="townOrVillage.valid || (townOrVillage.pristine && !fm.submitted) && (townOrVillage.errors && (townOrVillage.dirty || townOrVillage.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Enter Town Or Village
                      </div>
                    </div>
                  </div>
                  <div class=" col-lg-8 col-md-8">
                    <div class="form-group" [class.has-error]="!(reason.valid || (reason.pristine && !fm.submitted)) || (reason.errors && (reason.dirty || reason.touched ))">
                      <label>Reason Of Death</label>
                      <select class="form-control" name="reason" #reason="ngModel" required [(ngModel)]="Death.reasonOfDeath">
                        <option selected="selected" disabled hidden value="null">Select Disease</option>
                        <option value="Medical error">Medical error</option>
                        <option value="Stroke">Stroke</option>
                        <option value="Complication">Complication</option>
                        <option value="Infection">Infection</option>
                        <option value="Cardiac Arrest">Cardiac Arrest</option>
                        <option value="Wound">Wound</option>
                        <option value="Maternal Death">Maternal Death</option>
                        <option value="Other">Other</option>
                      </select>
                      <div [hidden]="reason.valid || (reason.pristine && !fm.submitted) && (reason.errors && (reason.dirty || reason.touched )) == false"
                        class="form-control-feedback">
                        Error: Please Seect Reason
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <br><br>
            <div class="col text-right">
              <div class="btn-group pull-right">
                <button class="btn btn-info" type="reset" name="save" (click)="Reset()"><span class="text">Reset</span>
                  <i class="fa fa-refresh"></i></button>
              </div>
              <div class="btn-group pull-right">
                <pre> </pre>
              </div>
              <div class="btn-group pull-right">
                <button class="btn btn-primary" name="reset" (click)="Save()"><span class="text">Save</span> <i class="fa fa-save"></i></button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div>
  <nz-modal [nzWidth]="789" [(nzVisible)]="isVisible" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter"
    (nzOnCancel)="handleCancel()">
    <!-- <ng-template #modalTitle class="search-ng-template">
        Find Patient
        <div class="search-selector"><app-search-field [patientData]="patientData"> </app-search-field></div>
      </ng-template> -->
    <ng-template #modalContent>
      <div class="search-selector">
        <app-search-field [patientData]="PatientData" style="width: 100%; height: 325px;"> </app-search-field>
      </div>

    </ng-template>
    <ng-template style="display: none;" #modalFooter>
      <!-- <button nz-button nzType="default" (click)="Print(modalContent.value)">Print</button> 
        <button nz-button nzType="default" (click)="handleCancel()">Close</button>
        <button nz-button nzType="primary" (click)="handleOk()" [nzLoading]="isConfirmLoading">Edit Patient</button> -->
    </ng-template>
  </nz-modal>
</div>

<app-death-certificate [DataSource]="DataToPrint"></app-death-certificate>